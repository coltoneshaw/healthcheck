\documentclass{article}
\usepackage{hyperref}
\usepackage{geometry}
\usepackage{tabularray}
\usepackage{xcolor}
\usepackage{fontspec}
\usepackage{soul}
\usepackage{ifthen}

\geometry{margin=.25in} 
\geometry{landscape}

% The url formatting to have it set for blue
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
    pdfborderstyle={/S/U/W 1}
}

\let\oldhref\href
\renewcommand{\href}[2]{\oldhref{#1}{\ul{#2}}}

\begin{document}

\section*{Mattermost Healthcheck Report}

This is an auto generated report from the healthcheck tool.

\section{Environment Checks}

\begin{tblr}{|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m,3cm]|Q[l,m,3cm]|X[l,m]|}
  \hline
  ID & SEV & STATUS & NAME & RESULT & DESCRIPTION \\
  \hline
$for(environment)$

  $environment.id$  & 
  $environment.severity$ & 
  $environment.status$ & 
  $environment.name$ & 
  $environment.result$ &
  $environment.description$ \\

  \hline
$endfor$
\end{tblr}

\section{Configuration Checks}

\begin{tblr}{|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m,3cm]|Q[l,m,3cm]|X[l,m]|}
  \hline
  ID & SEV & STATUS & NAME & RESULT & DESCRIPTION \\
  \hline
$for(config)$

  $config.id$  & 
  $config.severity$ & 
  $config.status$ & 
  $config.name$ & 
  $config.result$ &
  $config.description$ \\

  \hline
$endfor$
\end{tblr}

\section{Mattermost Log}

\subsection{Checks}

\begin{tblr}{|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m,3cm]|Q[l,m,3cm]|X[l,m]|}
  \hline
  ID & SEV & STATUS & NAME & RESULT & DESCRIPTION \\
  \hline
$for(mattermostlog)$

  $mattermostlog.id$ & 
  $mattermostlog.severity$ & 
  $mattermostlog.status$ & 
  $mattermostlog.name$ & 
  $mattermostlog.result$ &
  $mattermostlog.description$ \\

  \hline
$endfor$
\end{tblr}

\subsection{Top Logs}

\begin{tblr}{|Q[l,m]|Q[l,m]|X[m]|Q[l,m]|}
  \hline
  COUNT & LEVEL & MESSAGE & CALLER \\
  \hline
$for(toplogs)$
  $toplogs.count$ & $toplogs.level$ & $toplogs.msg$ & $toplogs.caller$  \\
  \hline
$endfor$
\end{tblr}

\newcommand{\pluginlink}[2]{%
  \ifthenelse{\equal{#1}{}}%
    {#2}%  % code to execute if the condition is true
    {\href{#1}{#2}}  % code to execute if the condition is false
}


\section{Plugins}

  \subsection{Active}

    \begin{tblr}{|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m]|}
      \hline
      ID & NAME & INSTALLED VERSION & LATEST VERSION & SUPPORT \\
      \hline
      $for(plugins)$
        $if(plugins.active)$
          $plugins.pluginid$ & 

          \pluginlink{$plugins.pluginurl$}{$plugins.pluginname$} & 

          $if(plugins.isupdated)$
            $plugins.installedversion$ 
          $else$
            $if(plugins.latestversion)$
              \textcolor{red}{$plugins.installedversion$}
            $else$
              $plugins.installedversion$
            $endif$
          $endif$ &

          $plugins.latestversion$ 
          $if(plugins.latestreleasedate)$
            \footnotesize($plugins.latestreleasedate$)
          $endif$ &

          $plugins.supportlevel$ \\
          \hline
        $endif$
      $endfor$
    \end{tblr}

  \subsection{Inactive}

    \begin{tblr}{|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m]|Q[l,m]|}
      \hline
      ID & NAME & INSTALLED VERSION & LATEST VERSION & SUPPORT \\
      \hline
      $for(plugins)$
      $if(plugins.active)$
      $else$
          $plugins.pluginid$ & 

          \pluginlink{$plugins.pluginurl$}{$plugins.pluginname$} & 

          $if(plugins.isupdated)$
            $plugins.installedversion$ 
          $else$
            $if(plugins.latestversion)$
              \textcolor{red}{$plugins.installedversion$}
            $else$
              $plugins.installedversion$
            $endif$
          $endif$ &

          $plugins.latestversion$ 
          $if(plugins.latestreleasedate)$
            \footnotesize($plugins.latestreleasedate$)
          $endif$ &

          $plugins.supportlevel$ \\
          \hline
        $endif$
      $endfor$
    \end{tblr}

\end{document}